<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="jquery-3.7.1.js"></script>
    <style>
        #dd {
            display: flex;
            justify-content: center;
        }

        .book {
            cursor: pointer;
            margin: 50px;
            padding: 1%;
            position: relative
        }

        .books {
            border: 4px dotted red;

        }

        .labelPrice {
            position: absolute;
            bottom: 10%;
            left: 10%; 
            background-color: white
        }
    </style>
</head>

<body>
    <div id="dd">
        <div class="book" id="b1">
            <img src="images/book1.webp" height="220px" width="150px" id="100" title="A Million to One">
            <label class="labelPrice">Price: 100</label>
        </div>
        <div class="book" id="b2">
            <img src="images/book2.webp" height="220px" width="150px" id="200" title="Alone">
            <label class="labelPrice">Price: 200</label>
        </div>
        <div class="book" id="b3">
            <img src="images/book3.jpg" height="220px" width="150px" id="300" title="The Book of Art">
            <label class="labelPrice">Price: 300</label>
        </div>
        <div class="book" id="b4">
            <img src="images/book4.jpg" height="220px" width="150px" id="400" title="Harry Potter and the Cursed Child">
            <label class="labelPrice">Price: 400</label>
        </div>
        <div class="book" id="b5">
            <img src="images/book5.webp" height="220px" width="150px" id="500" title="Hide and Seek">
            <label class="labelPrice">Price: 500</label>
        </div>

    </div>

    <button onclick="calculate()">Calculate</button>

    <br><br>

    <label>Total Price:</label><label id="totalPrice"></label>

    <br><br>

    <div id="table-container"></div>

    <!-- <table id="myTable">
        <thead>
            <tr>
                <th>Book</th>
                <th>Price</th>
            </tr>
        </thead>

        <tbody>

        </tbody>
    </table> -->

    <script>
        sum = 0
        bookArray = []

        c = document.getElementsByClassName("book")
        for (i = 0; i < c.length; i++) {
            c[i].addEventListener("click", demo)
        }


        function demo(e) {
            if (e.target.hasAttribute("class")) {
                e.target.removeAttribute("class")
                if (sum != 0) {
                    sum -= Number(e.target.id)
                }
            }
            else {

                e.target.setAttribute("class", "books")          // selected images have 'books' as an attribute
                // alert(e.target.id)                            // image is the target. image is being clicked
                price = e.target.id

                sum += Number(price)
                bookname = e.target.title

                // console.log(bookname)

                // bookArray.push(JSON.parse(JSON.stringify([bookname,sum])))

                let customObject = []
                customObject[0] = bookname
                customObject[1] = price


                var a = bookArray.flat()
                // console.log("flat array:")
                // console.log(a)

                var b = a.indexOf(bookname);

                if (b != -1) {
                    console.log('element present');

                }
                else { // c==-1

                    bookArray.push(customObject);
                    // alert('hi')
                    // console.log([bookname, sum]) 
                    // console.log('book added')
                }


                // bookArray.push(...[bookname,price])


            }
        }

        function calculate() {
            $("#totalPrice").html(` ${sum} Rupees`)

            table = '<table>'
            table += '<tr><th>Book</th><th>Price</th></tr>'

                bookArray.forEach(element => {

                    table += '<tr><td>'
                        table += element[0]
                        table += '</td><td>'
                            table += element[1]
                            table += '</td></tr>'
                            // console.log(this.bookname,this.sum)
                            // alert(element)
                            
                            // table = document.createElement("Table")
                            
                            // rows = table.tBodies[0].rows.length
                            
                            
                            
                            
                            
                            //     var newRow = table.insertRow(rows + 1)
                            
                            //     cell1 = newRow.insertCell(0)
                            //     cell2 = newRow.insertCell(1)
                            
                            //     cell1.innerHTML = element[0]
                            //     cell2.innerHTML = element[1]
                            
                            
                            
                            
                            
                        });
                        table += '</table>'

                        divtable = document.getElementById('table-container')
                        divtable.innerHTML = table
        }
    </script>
</body>

</html>